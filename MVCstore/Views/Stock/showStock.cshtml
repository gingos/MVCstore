
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>showStock</title>
</head>
<body>
    <script src="~/Scripts/jquery-1.10.2.js"></script>
    <script src="~/Scripts/jquery.validate.js"></script>
    <script src="~/Scripts/jquery.validate.unobtrusive.js"></script>

    <div>
        <span style="color:blue">Better restock, winter is coming:</span><br />
        <div>
            <input id="allStock_bt" type="button" value="Show All Products" onclick="getJSON('getProductsByJSON', getAll)" />
            <input id="zeroStock_bt" type="button" value="Show 0-Quantity Products" onclick="getJSON('getZeroQuantityByJSON', getZero)" />
        </div>
        <div id="status"></div>
        <div>
            <table id="stockTable"></table>
        </div>
        <br />
    </div>

    <script language="javascript">

        function getJSON(action, getStock) {
            $("#status").text("Loading Table...");
            $.get(action, null, getStock);
        }

        // Code products table in html : (JSON list) prodList retrieved from action "getProductsByJSON"
        function getAll(stock) {
            debugger;
            $("#stockTable").find("tr").remove();
            var tbl = $("#stockTable");
            var header = "<tr>" +
                "<td>Model</td>" +
                "<td>Maker</td>" +
                "<td>Quantity (In Stock)</td>" +
                "<td>Type</td>" +
                "<td>Order More?</td>" +
                "<td></td>" +
                "</tr>";
            tbl.append(header);
            for (k = 0; k < stock.length; k++) {
                var row = "<tr id= 'all_row_" + k + "'>" +
                    "<td>" + stock[k].Model + "</td>" +
                    "<td>" + stock[k].Maker + "</td>" +
                    "<td>" + stock[k].Quantity + "</td>" +
                    "<td>" + stock[k].Type + "</td>" +
                    "<td><input type='text' id='all_count_" + k + "' value='0'/></div></td>" +
                    "<td><input type='button' id='all_bt_" + k + "' value='Add to Cart' onclick=\"purchaseProcess($(\'#all_count_" + k + "\').val()," + stock[k].Model + "," + stock[k].Price + "," + "\'stock_txt_" + k + "\')\"></td>" +
                    //"<td><input type='button' id='pc_bt_" + k + "' value='Add to Cart' onclick=\"addToCart(\'pc_row_" + k + "\')\"></td>" +                                              `
                    "<td id='stock_txt_" + k + "'>Stock Text</td>" +
                    "</tr>"
                tbl.append(row);
            }

            $("#status").text("")

        }

    </script>
</body>
</html>
